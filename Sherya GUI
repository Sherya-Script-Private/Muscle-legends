local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Sherya-Script-Private/Elerium-V5/refs/heads/main/Library", true))()
local window = library:AddWindow("Sherya Script | Galaxy Hub", {
    main_color = Color3.fromRGB(0, 0, 0),
    min_size = Vector2.new(600, 660),
    can_resize = true,
})

local Farm = window:AddTab("Farm")
local Opti = window:AddTab("Optimizacion")
local FarmTab = window:AddTab("Extra")
local Calculator = window:AddTab("Calculator")
local creditsTab = window:AddTab("Credits")

local HttpService = game:GetService("HttpService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Variables globales corregidas
local startTime = 0
local rebirthStartTime = 0
local startRebirths = 0
local hasStarted = false
local targetRebirth = math.huge
local autoEatEnabled = false

local packFarmTarget = false
local packFarmInfinite = false
local fastStrength = false

-- Declarar variables para los toggles
local targetPackToggle = nil
local infinitePackToggle = nil
local fastStrengthToggle = nil

local function formatNumber(number)
    if number >= 1e15 then return string.format("%.2fQ", number/1e15)
    elseif number >= 1e12 then return string.format("%.2fT", number/1e12)
    elseif number >= 1e9 then return string.format("%.2fB", number/1e9)
    elseif number >= 1e6 then return string.format("%.2fM", number/1e6)
    elseif number >= 1e3 then return string.format("%.2fK", number/1e3)
    end
    return tostring(math.floor(number))
end

local function formatNumberWithCommas(number)
    local formatted = tostring(math.floor(number))
    local k
    while true do
        formatted, k = string.gsub(formatted, "^(-?%d+)(%d%d%d)", '%1,%2')
        if k == 0 then break end
    end
    return formatted
end

local function formatTime(seconds)
    local hours = math.floor(seconds / 3600)
    local minutes = math.floor((seconds % 3600) / 60)
    local secs = math.floor(seconds % 60)
    return string.format("%02d:%02d:%02d", hours, minutes, secs)
end

local packRebirthValues = {
    [0] = 1,  
    [1] = 2,  
    [2] = 4,  
    [3] = 6,  
    [4] = 8,  
    [5] = 10, 
    [6] = 12, 
    [7] = 14, 
    [8] = 16  
}

local function unequipAllPets()
    local petsFolder = player.petsFolder
    if not petsFolder then return end
    
    for _, folder in pairs(petsFolder:GetChildren()) do
        if folder:IsA("Folder") then
            for _, pet in pairs(folder:GetChildren()) do
                ReplicatedStorage.rEvents.equipPetEvent:FireServer("unequipPet", pet)
            end
        end
    end
    task.wait(0.1)
end

local function equipSpecificPacks(packName, count)
    unequipAllPets()
    task.wait(0.2)

    local packs = {}
    if player.petsFolder and player.petsFolder:FindFirstChild("Unique") then
        for _, pet in pairs(player.petsFolder.Unique:GetChildren()) do
            if pet.Name == packName then
                table.insert(packs, pet)
            end
        end
    end

    local packsToEquip = math.min(count, #packs)
    for i = 1, packsToEquip do
        ReplicatedStorage.rEvents.equipPetEvent:FireServer("equipPet", packs[i])
        task.wait(0.1)
    end

    return packsToEquip
end

local function findMachine(machineName)
    local machine = workspace.machinesFolder:FindFirstChild(machineName)
    if not machine then
        for _, folder in pairs(workspace:GetChildren()) do
            if folder:IsA("Folder") and folder.Name:find("machines") then
                machine = folder:FindFirstChild(machineName)
                if machine then break end
            end
        end
    end
    return machine
end

local function pressE()
    local vim = game:GetService("VirtualInputManager")
    vim:SendKeyEvent(true, "E", false, game)
    task.wait(0.1)
    vim:SendKeyEvent(false, "E", false, game)
end

local isPositionLocked = false
local originalCFrame = nil
local function lockPosition(lock)
    isPositionLocked = lock

    if lock and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        originalCFrame = player.Character.HumanoidRootPart.CFrame

        if not _G.positionConnection then
            _G.positionConnection = game:GetService("RunService").Heartbeat:Connect(function()
                if isPositionLocked and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and originalCFrame then
                    player.Character.HumanoidRootPart.CFrame = originalCFrame
                    player.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
                    player.Character.HumanoidRootPart.RotVelocity = Vector3.new(0, 0, 0)
                end
            end)
        end
    elseif not lock and _G.positionConnection then
        _G.positionConnection:Disconnect()
        _G.positionConnection = nil
    end
end

Farm:AddTextBox("Target Rebirth Amount", function(text)
    local num = tonumber(text)
    if num then
        targetRebirth = num
    else
        targetRebirth = math.huge
    end
end)

targetPackToggle = Farm:AddSwitch("Pack Farm | Target", function(bool)
    packFarmTarget = bool

    if bool then
        if packFarmInfinite and infinitePackToggle then
            packFarmInfinite = false
            infinitePackToggle:Set(false)
        end

        if fastStrength and fastStrengthToggle then
            fastStrength = false
            fastStrengthToggle:Set(false)
        end

        if targetRebirth ~= math.huge and targetRebirth > player.leaderstats.Rebirths.Value then
            task.spawn(function()
                lockPosition(true)

                while packFarmTarget do
                    local currentRebirths = player.leaderstats.Rebirths.Value

                    if currentRebirths >= targetRebirth then
                        packFarmTarget = false
                        targetPackToggle:Set(false)
                        lockPosition(false)
                        break
                    end

                    local rebirthCost = 10000 + (5000 * currentRebirths)
                    if player.ultimatesFolder:FindFirstChild("Golden Rebirth") then
                        local goldenRebirths = player.ultimatesFolder["Golden Rebirth"].Value
                        rebirthCost = math.floor(rebirthCost * (1 - (goldenRebirths * 0.1)))
                    end

                    local rebirthsNeeded = targetRebirth - currentRebirths
                    local packCount = 0

                    if rebirthsNeeded == 1 then
                        packCount = 0
                    else
                        for i = 8, 1, -1 do
                            if packRebirthValues[i] <= rebirthsNeeded then
                                packCount = i
                                break
                            end
                        end
                    end

                    equipSpecificPacks("Swift Samurai", 8)

                    while packFarmTarget and player.leaderstats.Strength.Value < rebirthCost do
                        for i = 1, 10 do
                            player.muscleEvent:FireServer("rep")
                        end
                        task.wait()
                    end

                    equipSpecificPacks("Tribal Overlord", packCount)

                    local machine = findMachine("Jungle Bar Lift")
                    if machine and machine:FindFirstChild("interactSeat") then
                        player.Character.HumanoidRootPart.CFrame = machine.interactSeat.CFrame * CFrame.new(0, 3, 0)
                        repeat
                            task.wait(0.1)
                            pressE()
                        until player.Character.Humanoid.Sit
                    end

                    local initialRebirths = player.leaderstats.Rebirths.Value
                    repeat
                        ReplicatedStorage.rEvents.rebirthRemote:InvokeServer("rebirthRequest")
                        task.wait(0.1)
                    until player.leaderstats.Rebirths.Value > initialRebirths

                    task.wait(0.5)
                end

                lockPosition(false)
                unequipAllPets()
            end)
        else
            packFarmTarget = false
            targetPackToggle:Set(false)
        end
    else
        lockPosition(false)
        unequipAllPets()
    end
end)

infinitePackToggle = Farm:AddSwitch("Pack Farm | Infinite", function(bool)
    packFarmInfinite = bool

    if bool then
        if packFarmTarget and targetPackToggle then
            packFarmTarget = false
            targetPackToggle:Set(false)
        end

        if fastStrength and fastStrengthToggle then
            fastStrength = false
            fastStrengthToggle:Set(false)
        end

        task.spawn(function()
            lockPosition(true)

            while packFarmInfinite do
                local currentRebirths = player.leaderstats.Rebirths.Value

                local rebirthCost = 10000 + (5000 * currentRebirths)
                if player.ultimatesFolder:FindFirstChild("Golden Rebirth") then
                    local goldenRebirths = player.ultimatesFolder["Golden Rebirth"].Value
                    rebirthCost = math.floor(rebirthCost * (1 - (goldenRebirths * 0.1)))
                end

                equipSpecificPacks("Swift Samurai", 8)

                while packFarmInfinite and player.leaderstats.Strength.Value < rebirthCost do
                    for i = 1, 10 do
                        player.muscleEvent:FireServer("rep")
                    end
                    task.wait()
                end

                equipSpecificPacks("Tribal Overlord", 8)

                local machine = findMachine("Jungle Bar Lift")
                if machine and machine:FindFirstChild("interactSeat") then
                    player.Character.HumanoidRootPart.CFrame = machine.interactSeat.CFrame * CFrame.new(0, 3, 0)
                    repeat
                        task.wait(0.1)
                        pressE()
                    until player.Character.Humanoid.Sit
                end

                local initialRebirths = player.leaderstats.Rebirths.Value
                repeat
                    ReplicatedStorage.rEvents.rebirthRemote:InvokeServer("rebirthRequest")
                    task.wait(0.1)
                until player.leaderstats.Rebirths.Value > initialRebirths

                task.wait(0.5)
            end

            lockPosition(false)
            unequipAllPets()
        end)
    else
        lockPosition(false)
        unequipAllPets()
    end
end)

Farm:AddLabel("-----Fast Strength-----")

local fastStrengthToggle = Farm:AddSwitch("Pack Farm | Fast Strength", function(bool)
    fastStrength = bool

    if bool then
        if packFarmTarget then
            packFarmTarget = false
            targetPackToggle:Set(false)
        end

        if packFarmInfinite then
            packFarmInfinite = false
            infinitePackToggle:Set(false)
        end

        task.spawn(function()
            equipSpecificPacks("Swift Samurai", 8)

            while fastStrength do
                for i = 1, 25 do
                    player.muscleEvent:FireServer("rep")
                end
                task.wait()
            end
        end)
    else
        unequipAllPets()
    end
end)

local statsFolder = Farm:AddFolder("Rebirth Statistics")
local runTimeLabel = statsFolder:AddLabel("RunTime: 00:00:00")
local currentRebirthsLabel = statsFolder:AddLabel("Current Rebirths: 0")
local rebirthGainsLabel = statsFolder:AddLabel("Rebirth Gains: 0")
local targetRebirthLabel = statsFolder:AddLabel("Target Rebirth: None")
local rebirthsNeededLabel = statsFolder:AddLabel("Rebirths Needed: N/A")
local timeToTargetLabel = statsFolder:AddLabel("Time To Target: N/A")
local estimatedCompletionLabel = statsFolder:AddLabel("Estimated Completion: N/A")
local perMinuteLabel = statsFolder:AddLabel("Per Minute: 0")
local perHourLabel = statsFolder:AddLabel("Per Hour: 0")
local hours12Label = statsFolder:AddLabel("12 Hours: 0")
local hours24Label = statsFolder:AddLabel("24 Hours: 0")

local settingsFolder = Farm:AddFolder("Settings")
settingsFolder:AddButton("Reset RunTime", function()
    startTime = os.time()
    rebirthStartTime = os.time()
    if player.leaderstats and player.leaderstats.Rebirths then
        startRebirths = player.leaderstats.Rebirths.Value
        hasStarted = true
    else
        startRebirths = 0
        hasStarted = false
    end
end)

-- Corregir el spawn de estad√≠sticas
task.spawn(function()
    startTime = os.time()
    rebirthStartTime = os.time()

    if player.leaderstats and player.leaderstats.Rebirths then
        startRebirths = player.leaderstats.Rebirths.Value
    end

    while true do
        if player.leaderstats and player.leaderstats.Rebirths then
            local currentRebirths = player.leaderstats.Rebirths.Value
            local elapsedTime = os.time() - startTime
            local rebirthElapsedTime = os.time() - rebirthStartTime

            currentRebirthsLabel.Text = string.format("Current Rebirths: %s", 
                formatNumberWithCommas(currentRebirths))

            if targetRebirth ~= math.huge then
                targetRebirthLabel.Text = string.format("Target Rebirth: %s", 
                    formatNumberWithCommas(targetRebirth))
            else
                targetRebirthLabel.Text = "Target Rebirth: None"
            end

            if hasStarted then
                local gainedRebirths = currentRebirths - startRebirths

                rebirthGainsLabel.Text = string.format("Rebirth Gains: %s", 
                    formatNumberWithCommas(gainedRebirths))

                if rebirthElapsedTime > 0 then
                    local perMinute = gainedRebirths / (rebirthElapsedTime / 60)
                    local perHour = perMinute * 60

                    perMinuteLabel.Text = string.format("Per Minute: %s", 
                        formatNumberWithCommas(perMinute))
                    perHourLabel.Text = string.format("Per Hour: %s", 
                        formatNumberWithCommas(perHour))
                    hours12Label.Text = string.format("12 Hours: %s", 
                        formatNumberWithCommas(perHour * 12))
                    hours24Label.Text = string.format("24 Hours: %s", 
                        formatNumberWithCommas(perHour * 24))

                    if targetRebirth ~= math.huge then
                        local rebirthsNeeded = targetRebirth - currentRebirths
                        rebirthsNeededLabel.Text = string.format("Rebirths Needed: %s",
                            formatNumberWithCommas(rebirthsNeeded))

                        if perHour > 0 and rebirthsNeeded > 0 then
                            local hoursToTarget = rebirthsNeeded / perHour
                            local timeToTarget = formatTime(hoursToTarget * 3600)
                            timeToTargetLabel.Text = string.format("Time To Target: %s", timeToTarget)

                            local completionTimestamp = os.time() + (hoursToTarget * 3600)
                            local completionDate = os.date("%m/%d/%Y %H:%M", completionTimestamp)
                            estimatedCompletionLabel.Text = string.format("Estimated Completion: %s", completionDate)
                        elseif rebirthsNeeded <= 0 then
                            timeToTargetLabel.Text = "Time To Target: Reached!"
                            estimatedCompletionLabel.Text = "Estimated Completion: Completed!"
                        else
                            timeToTargetLabel.Text = "Time To Target: N/A"
                            estimatedCompletionLabel.Text = "Estimated Completion: N/A"
                        end
                    else
                        rebirthsNeededLabel.Text = "Rebirths Needed: N/A"
                        timeToTargetLabel.Text = "Time To Target: N/A"
                        estimatedCompletionLabel.Text = "Estimated Completion: N/A"
                    end
                end

                local timeString = formatTime(elapsedTime)
                runTimeLabel.Text = string.format("RunTime: %s", timeString)
            else
                rebirthGainsLabel.Text = "Rebirth Gains: 0"
                perMinuteLabel.Text = "Per Minute: 0"
                perHourLabel.Text = "Per Hour: 0"
                hours12Label.Text = "12 Hours: 0"
                hours24Label.Text = "24 Hours: 0"
                runTimeLabel.Text = "RunTime: 00:00:00"
                rebirthsNeededLabel.Text = "Rebirths Needed: N/A"
                timeToTargetLabel.Text = "Time To Target: N/A"
                estimatedCompletionLabel.Text = "Estimated Completion: N/A"
            end
        else
            currentRebirthsLabel.Text = "Current Rebirths: Waiting..."
        end

        task.wait(1)
    end
end)

local function checkForRebirthStart()
    if not player.leaderstats or not player.leaderstats:FindFirstChild("Rebirths") then
        repeat
            task.wait(0.5)
        until player.leaderstats and player.leaderstats:FindFirstChild("Rebirths")
    end

    local initialRebirths = player.leaderstats.Rebirths.Value

    player.leaderstats.Rebirths:GetPropertyChangedSignal("Value"):Connect(function()
        local newRebirths = player.leaderstats.Rebirths.Value
        if not hasStarted and newRebirths > initialRebirths then
            startTime = os.time()
            rebirthStartTime = os.time()
            startRebirths = initialRebirths
            hasStarted = true
        end
    end)
end

task.spawn(checkForRebirthStart)

-- ANTI-LAG OP CORREGIDO
local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")

local antiLagActive = false
local blackScreenGui = nil

local function createBlackScreen()
    -- Crear ScreenGui para pantalla negra
    blackScreenGui = Instance.new("ScreenGui")
    blackScreenGui.Name = "AntiLagBlackScreen"
    blackScreenGui.ResetOnSpawn = false
    blackScreenGui.IgnoreGuiInset = true
    
    local blackFrame = Instance.new("Frame")
    blackFrame.Name = "BlackFrame"
    blackFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    blackFrame.BorderSizePixel = 0
    blackFrame.Size = UDim2.new(1, 0, 1, 0)
    blackFrame.Position = UDim2.new(0, 0, 0, 0)
    blackFrame.ZIndex = -1000 -- Mantener al fondo para ver la UI
    blackFrame.Parent = blackScreenGui
    
    blackScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    print("Pantalla negra activada")
end

local function removeBlackScreen()
    if blackScreenGui then
        blackScreenGui:Destroy()
        blackScreenGui = nil
        print("Pantalla negra desactivada")
    end
end

local function optimizeEverything()
    pcall(function()
        -- Eliminar todos los efectos visuales del workspace
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("ParticleEmitter") or obj:IsA("Fire") or obj:IsA("Smoke") or 
               obj:IsA("Sparkles") or obj:IsA("Explosion") or obj:IsA("Trail") or 
               obj:IsA("Beam") or obj:IsA("PointLight") or obj:IsA("SpotLight") or
               obj:IsA("SurfaceLight") or obj:IsA("Decal") or obj:IsA("Texture") or
               obj:IsA("SurfaceGui") or obj:IsA("BillboardGui") then
                obj:Destroy()
            end
        end
        
        -- Optimizar materiales de todas las partes
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("BasePart") then
                obj.Material = Enum.Material.Plastic
                obj.Reflectance = 0
                obj.TopSurface = Enum.SurfaceType.Smooth
                obj.BottomSurface = Enum.SurfaceType.Smooth
                
                -- Simplificar MeshParts
                if obj:IsA("MeshPart") then
                    obj.RenderFidelity = Enum.RenderFidelity.Performance
                end
            end
        end
        
        -- Optimizar iluminaci√≥n dr√°sticamente
        Lighting.GlobalShadows = false
        Lighting.FogEnd = 100
        Lighting.FogStart = 0
        Lighting.Technology = Enum.Technology.Legacy
        Lighting.Brightness = 1
        Lighting.Ambient = Color3.fromRGB(128, 128, 128)
        
        -- Eliminar todos los efectos de iluminaci√≥n
        for _, effect in pairs(Lighting:GetChildren()) do
            if effect:IsA("PostEffect") or effect:IsA("Atmosphere") or 
               effect:IsA("BloomEffect") or effect:IsA("BlurEffect") or
               effect:IsA("ColorCorrectionEffect") or effect:IsA("SunRaysEffect") then
                effect:Destroy()
            end
        end
        
        -- Configuraciones de rendimiento extremas
        settings().Rendering.QualityLevel = 1
        settings().Rendering.MeshPartDetailLevel = Enum.MeshPartDetailLevel.Level01
        
        -- Eliminar sonidos del workspace
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("Sound") then
                obj:Destroy()
            end
        end
        
        print("Optimizaci√≥n extrema aplicada")
    end)
end

-- BOT√ìN √öNICO ANTI-LAG OP
Opti:AddSwitch("Anti-Lag OP (Todo en Uno)", function(Value)
    antiLagActive = Value
    
    if Value then
        -- Activar todo
        StarterGui:SetCore("SendNotification", {
            Title = "Anti-Lag OP";
            Text = "üü¢ Activando optimizaci√≥n extrema...";
            Duration = 3;
        })
        
        -- Aplicar optimizaciones
        optimizeEverything()
        
        -- Activar pantalla negra
        createBlackScreen()
        
        -- Limpieza autom√°tica cada 30 segundos
        task.spawn(function()
            while antiLagActive do
                task.wait(30)
                if antiLagActive then
                    optimizeEverything()
                    print("Limpieza autom√°tica ejecutada")
                end
            end
        end)
        
        StarterGui:SetCore("SendNotification", {
            Title = "Anti-Lag OP";
            Text = "‚úÖ Optimizaci√≥n completa activada!";
            Duration = 4;
        })
        
    else
        -- Desactivar
        removeBlackScreen()
        
        StarterGui:SetCore("SendNotification", {
            Title = "Anti-Lag OP";
            Text = "üî¥ Desactivado";
            Duration = 2;
        })
    end
end)

Opti:AddLabel("üí° El Anti-Lag OP incluye:")
Opti:AddLabel("‚Ä¢ Pantalla negra autom√°tica")
Opti:AddLabel("‚Ä¢ Optimizaci√≥n de gr√°ficos")
Opti:AddLabel("‚Ä¢ Limpieza autom√°tica cada 30s")
Opti:AddLabel("‚Ä¢ Eliminaci√≥n de efectos visuales")

-- FUNCIONES PARA FARMTAB
local function eatProteinEgg()
    pcall(function()
        local backpack = player:WaitForChild("Backpack")
        local character = player.Character or player.CharacterAdded:Wait()

        local egg = backpack:FindFirstChild("Protein Egg")
        if egg then
            egg.Parent = character
            egg:Activate()
        end
    end)
end

-- Spawn para auto eat
task.spawn(function()
    while true do
        if autoEatEnabled then
            eatProteinEgg()
            task.wait(1800) -- 30 minutos
        else
            task.wait(1)
        end
    end
end)

-- Switches y botones corregidos para FarmTab
FarmTab:AddSwitch("Auto Eat Egg 30 Minutes", function(state)
    autoEatEnabled = state
end)

FarmTab:AddSwitch("Lock Position", function(Value)
    if Value then
        local currentPos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
        getgenv().posLock = game:GetService("RunService").Heartbeat:Connect(function()
            if game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = currentPos
            end
        end)
    else
        if getgenv().posLock then
            getgenv().posLock:Disconnect()
            getgenv().posLock = nil
        end
    end
end)

FarmTab:AddSwitch("Delete All Frames", function(state)
    if state then
        pcall(function()
            local rSto = game:GetService("ReplicatedStorage")
            for _, obj in pairs(rSto:GetChildren()) do
                if obj.Name:match("Frame$") and obj:IsA("GuiObject") then
                    obj:Destroy()
                end
            end
        end)
    end
end)

-- Anti AFK Button
FarmTab:AddButton("Anti AFK", function()
    -- Anti AFK implementation
    local GC = getconnections or get_signal_cons
    if GC then
        for i, v in pairs(GC(game.Players.LocalPlayer.Idled)) do
            if v["Disable"] then
                v["Disable"](v)
            elseif v["Disconnect"] then
                v["Disconnect"](v)
            end
        end
    else
        -- Fallback method if getconnections isn't available
        local VirtualUser = game:GetService("VirtualUser")
        game:GetService("Players").LocalPlayer.Idled:Connect(function()
            VirtualUser:CaptureController()
            VirtualUser:ClickButton2(Vector2.new())
        end)
    end
    
    -- Notify user
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Anti AFK",
        Text = "Anti AFK has been enabled!",
        Duration = 5
    })
    
    -- Additional periodic movement to prevent AFK
    spawn(function()
        while wait(30) do
            local VirtualUser = game:GetService("VirtualUser")
            VirtualUser:CaptureController()
            VirtualUser:ClickButton2(Vector2.new())
        end
    end)
end)

-- CALCULATOR CORREGIDO (SOLO STRENGTH Y DURABILITY)
local strengthStartValue = 0
local durabilityStartValue = 0
local strengthStartTime = 0
local durabilityStartTime = 0
local strengthActive = false
local durabilityActive = false

-- Crear folders solo para Strength y Durability
local strengthFolder = Calculator:AddFolder("üí™ Strength")
local durabilityFolder = Calculator:AddFolder("üõ°Ô∏è Durability")

-- Funci√≥n mejorada para formatear n√∫meros
local function formatNumber(num)
    if num == math.huge then
        return "‚àû"
    elseif num == 0 then
        return "0"
    elseif num < 0.01 and num > 0 then
        return "~0"
    end
    
    local abs = math.abs(num)
    local sign = num < 0 and "-" or ""
    
    if abs >= 1e30 then
        return sign .. string.format("%.2f", abs / 1e30) .. "No"
    elseif abs >= 1e27 then
        return sign .. string.format("%.2f", abs / 1e27) .. "Oc"
    elseif abs >= 1e24 then
        return sign .. string.format("%.2f", abs / 1e24) .. "Sp"
    elseif abs >= 1e21 then
        return sign .. string.format("%.2f", abs / 1e21) .. "Sx"
    elseif abs >= 1e18 then
        return sign .. string.format("%.2f", abs / 1e18) .. "Qt"
    elseif abs >= 1e15 then
        return sign .. string.format("%.2f", abs / 1e15) .. "Qd"
    elseif abs >= 1e12 then
        return sign .. string.format("%.2f", abs / 1e12) .. "T"
    elseif abs >= 1e9 then
        return sign .. string.format("%.2f", abs / 1e9) .. "B"
    elseif abs >= 1e6 then
        return sign .. string.format("%.2f", abs / 1e6) .. "M"
    elseif abs >= 1e3 then
        return sign .. string.format("%.2f", abs / 1e3) .. "K"
    else
        return sign .. string.format("%.2f", abs)
    end
end

-- Funci√≥n para obtener valor actual de estad√≠stica
local function getCurrentStrength()
    local player = game.Players.LocalPlayer
    if player and player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Strength") then
        return player.leaderstats.Strength.Value
    end
    return 0
end

local function getCurrentDurability()
    local player = game.Players.LocalPlayer
    if player and player:FindFirstChild("Durability") then
        return player.Durability.Value
    end
    return 0
end

-- Crear labels para Strength
local strengthLabels = {
    status = strengthFolder:AddLabel("Status: Presiona Start para comenzar"),
    current = strengthFolder:AddLabel("Current: 0"),
    gained = strengthFolder:AddLabel("Gained: 0"),
    perMinute = strengthFolder:AddLabel("Per Minute: 0"),
    perHour = strengthFolder:AddLabel("Per Hour: 0"),
    perDay = strengthFolder:AddLabel("Per Day: 0")
}

-- Crear labels para Durability
local durabilityLabels = {
    status = durabilityFolder:AddLabel("Status: Presiona Start para comenzar"),
    current = durabilityFolder:AddLabel("Current: 0"),
    gained = durabilityFolder:AddLabel("Gained: 0"),
    perMinute = durabilityFolder:AddLabel("Per Minute: 0"),
    perHour = durabilityFolder:AddLabel("Per Hour: 0"),
    perDay = durabilityFolder:AddLabel("Per Day: 0")
}

-- Funci√≥n para actualizar labels de Strength
local function updateStrengthLabels()
    local currentStrength = getCurrentStrength()
    local currentTime = tick()
    
    strengthLabels.current.Text = "Current: " .. formatNumber(currentStrength)
    
    if strengthActive and strengthStartTime > 0 then
        local timeElapsed = currentTime - strengthStartTime
        local gained = currentStrength - strengthStartValue
        
        strengthLabels.gained.Text = "Gained: " .. formatNumber(gained)
        
        if timeElapsed >= 60 then -- Solo calcular despu√©s de 1 minuto
            local perMinute = (gained / timeElapsed) * 60
            local perHour = perMinute * 60
            local perDay = perHour * 24
            
            strengthLabels.status.Text = "Status: ‚úÖ Activo"
            strengthLabels.perMinute.Text = "Per Minute: " .. formatNumber(perMinute)
            strengthLabels.perHour.Text = "Per Hour: " .. formatNumber(perHour)
            strengthLabels.perDay.Text = "Per Day: " .. formatNumber(perDay)
        else
            local remaining = 60 - timeElapsed
            strengthLabels.status.Text = "Status: ‚è≥ Calculando... " .. math.ceil(remaining) .. "s"
            strengthLabels.perMinute.Text = "Per Minute: Calculando..."
            strengthLabels.perHour.Text = "Per Hour: Calculando..."
            strengthLabels.perDay.Text = "Per Day: Calculando..."
        end
    else
        strengthLabels.gained.Text = "Gained: 0"
        strengthLabels.perMinute.Text = "Per Minute: 0"
        strengthLabels.perHour.Text = "Per Hour: 0"
        strengthLabels.perDay.Text = "Per Day: 0"
    end
end

-- Funci√≥n para actualizar labels de Durability
local function updateDurabilityLabels()
    local currentDurability = getCurrentDurability()
    local currentTime = tick()
    
    durabilityLabels.current.Text = "Current: " .. formatNumber(currentDurability)
    
    if durabilityActive and durabilityStartTime > 0 then
        local timeElapsed = currentTime - durabilityStartTime
        local gained = currentDurability - durabilityStartValue
        
        durabilityLabels.gained.Text = "Gained: " .. formatNumber(gained)
        
        if timeElapsed >= 60 then -- Solo calcular despu√©s de 1 minuto
            local perMinute = (gained / timeElapsed) * 60
            local perHour = perMinute * 60
            local perDay = perHour * 24
            
            durabilityLabels.status.Text = "Status: ‚úÖ Activo"
            durabilityLabels.perMinute.Text = "Per Minute: " .. formatNumber(perMinute)
            durabilityLabels.perHour.Text = "Per Hour: " .. formatNumber(perHour)
            durabilityLabels.perDay.Text = "Per Day: " .. formatNumber(perDay)
        else
            local remaining = 60 - timeElapsed
            durabilityLabels.status.Text = "Status: ‚è≥ Calculando... " .. math.ceil(remaining) .. "s"
            durabilityLabels.perMinute.Text = "Per Minute: Calculando..."
            durabilityLabels.perHour.Text = "Per Hour: Calculando..."
            durabilityLabels.perDay.Text = "Per Day: Calculando..."
        end
    else
        durabilityLabels.gained.Text = "Gained: 0"
        durabilityLabels.perMinute.Text = "Per Minute: 0"
        durabilityLabels.perHour.Text = "Per Hour: 0"
        durabilityLabels.perDay.Text = "Per Day: 0"
    end
end

-- Botones de control para Strength
strengthFolder:AddButton("üü¢ Start Strength Calculator", function()
    strengthActive = true
    strengthStartTime = tick()
    strengthStartValue = getCurrentStrength()
    strengthLabels.status.Text = "Status: üîÑ Iniciado - Calculando..."
    
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Calculator";
        Text = "üí™ Strength Calculator iniciado!";
        Duration = 3;
    })
end)

strengthFolder:AddButton("üî¥ Stop Strength Calculator", function()
    strengthActive = false
    strengthStartTime = 0
    strengthStartValue = 0
    strengthLabels.status.Text = "Status: ‚èπÔ∏è Detenido"
    
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Calculator";
        Text = "üí™ Strength Calculator detenido!";
        Duration = 3;
    })
end)

-- Botones de control para Durability
durabilityFolder:AddButton("üü¢ Start Durability Calculator", function()
    durabilityActive = true
    durabilityStartTime = tick()
    durabilityStartValue = getCurrentDurability()
    durabilityLabels.status.Text = "Status: üîÑ Iniciado - Calculando..."
    
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Calculator";
        Text = "üõ°Ô∏è Durability Calculator iniciado!";
        Duration = 3;
    })
end)

durabilityFolder:AddButton("üî¥ Stop Durability Calculator", function()
    durabilityActive = false
    durabilityStartTime = 0
    durabilityStartValue = 0
    durabilityLabels.status.Text = "Status: ‚èπÔ∏è Detenido"
    
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Calculator";
        Text = "üõ°Ô∏è Durability Calculator detenido!";
        Duration = 3;
    })
end)

-- Bot√≥n para reiniciar ambos calculators
Calculator:AddButton("üîÑ Reset All Calculators", function()
    -- Reset Strength
    strengthActive = false
    strengthStartTime = 0
    strengthStartValue = 0
    strengthLabels.status.Text = "Status: Presiona Start para comenzar"
    
    -- Reset Durability
    durabilityActive = false
    durabilityStartTime = 0
    durabilityStartValue = 0
    durabilityLabels.status.Text = "Status: Presiona Start para comenzar"
    
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Calculator";
        Text = "üîÑ Todos los calculators han sido reiniciados!";
        Duration = 3;
    })
end)

Calculator:AddLabel("üí° Instrucciones:")
Calculator:AddLabel("1. Presiona 'Start' en la stat que quieras medir")
Calculator:AddLabel("2. Espera 1 minuto para ver los c√°lculos")
Calculator:AddLabel("3. Los valores se actualizan autom√°ticamente")

-- Loop principal del calculator
task.spawn(function()
    while true do
        updateStrengthLabels()
        updateDurabilityLabels()
        task.wait(1) -- Actualizar cada segundo
    end
end)

print("üìä Calculator corregido - Solo Strength y Durability")

creditsTab:AddLabel("‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ")
creditsTab:AddLabel(" Script hecho por Isabella")
creditsTab:AddLabel("‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ")
creditsTab:AddLabel("")
creditsTab:AddLabel("User de Roblox: MissSherya")
creditsTab:AddLabel("Instagram: Sherya_Luck")
creditsTab:AddLabel("TikTok: Sherya6000")
creditsTab:AddLabel("Discord: isabella_hrz")
creditsTab:AddLabel("")
creditsTab:AddLabel("Thanks por usar el script")
creditsTab:AddLabel("")
creditsTab:AddLabel("Recomienda el script para hacer mas actualizaciones")
creditsTab:AddLabel("Hago peticiones de otros juegos")
creditsTab:AddLabel("Diviertete amiguito")

creditsTab:AddButton("Servidor Discord", function()
    setclipboard("https://discord.gg/rnDrhTZZCF")
end)
